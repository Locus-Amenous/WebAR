<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>WebAR con modelo anclado tras detectar marcador</title>
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <style>
    body, html { margin: 0; overflow: hidden; width: 100%; height: 100%; }
  </style>
</head>
<body>
  <a-scene embedded arjs>
    <!-- Marcador -->
    <a-marker id="miMarcador" type="pattern" url="markers/mimarcador.patt">
      <!-- Modelo “temporal” solo para detectar -->
      <a-entity id="modelo-temporal" visible="false"></a-entity>
    </a-marker>

    <!-- Modelo fijo que queda en la escena -->
    <a-entity id="modelo-fijo"></a-entity>

    <!-- Cámara -->
    <a-entity camera></a-entity>
  </a-scene>

  <script>
    const marcador = document.querySelector("#miMarcador");
    const modeloFijo = document.querySelector("#modelo-fijo");

    let colocado = false;

    marcador.addEventListener("markerFound", () => {
      if (!colocado) {
        const pos = marcador.object3D.position.clone();
        const rot = marcador.object3D.rotation.clone();

        // Cargamos el modelo
        modeloFijo.setAttribute("gltf-model", "models/tu-modelo.glb");
        modeloFijo.setAttribute("scale", "0.5 0.5 0.5");

        // Copiamos posición y rotación
        modeloFijo.object3D.position.copy(pos);
        modeloFijo.object3D.rotation.copy(rot);

        colocado = true;
      }
    });
  </script>
</body>
</html>